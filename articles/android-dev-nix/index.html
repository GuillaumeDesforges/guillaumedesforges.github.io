<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.0d5f8ea5d9045421c457.css" id="gatsby-global-css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}main{min-height:calc(100vh - 96px)}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}p{text-align:justify}a{color:#699ea5;background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0;color:grey}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0 0 0 1.45rem;margin:0 1.45rem 1.45rem;border-left:3px solid #699ea5}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.27.4"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-184218145-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-184218145-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><title data-react-helmet="true">Building my first Android app without Android Studio | Guillaume Desforges&#x27; Blog</title><meta data-react-helmet="true" name="description" content="My personal website"/><meta data-react-helmet="true" property="og:title" content="Building my first Android app without Android Studio"/><meta data-react-helmet="true" property="og:description" content="My personal website"/><meta data-react-helmet="true" property="og:type" content="website"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#699ea5"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link as="script" rel="preload" href="/webpack-runtime-4af22aa3d881e1b9345f.js"/><link as="script" rel="preload" href="/framework-44697bb84c432a102996.js"/><link as="script" rel="preload" href="/app-ad67cb265854e65ca917.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-c8faa090aa439f9fb613.js"/><link as="script" rel="preload" href="/component---src-templates-article-template-js-0ed56a67829c8ab1881c.js"/><link as="fetch" rel="preload" href="/page-data/articles/android-dev-nix/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="min-height:100vh;display:flex;flex-direction:column"><header style="background:#699ea5;margin-bottom:1.45rem"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem"><h1 style="margin:0"><a style="color:white;text-decoration:none" href="/"><div style="display:flex;justify-content:space-between;align-items:center"><div>Guillaume Desforges</div><img src="data:image/jpeg;base64,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" style="height:2em;margin:0;border-radius:1em" alt="Guillaume Desforges"/></div></a></h1></div></header><main style="margin:0 auto;max-width:960px;flex-grow:1;padding:1em"><div><div><h2>Building my first Android app without Android Studio</h2><div style="font-style:italic"><div>29-11-2020<!-- --> - Tags: <!-- -->software engineering, mobile development, android, vs code, nix</div><div>&gt; <!-- -->VS Code (Remote SSH), Nix, Gradle instead</div></div><div style="margin-top:3em;margin-bottom:7em" class="blog-post-content"><blockquote>
<p>Disclaimer note! Before diving in, please keep in mind that currently VS Code Java plugin <a href="https://github.com/redhat-developer/vscode-java/issues/1390">does not support Android development</a>.
It will support react-native development, but not the Java part of it (only the lightweight Java features).</p>
</blockquote>
<p>Since I am a Web developer, I wanted to build my first Android app using React Native.
I have a computer on Windows which I use in my everyday life, and a server on Linux NixOS which I use to code.
Thanks to VS Code "Remote Development" extension I can code like I'm on this Linux machine from anywhere, including my Windows computer.
Linux development on one tab, my favorite game in another tab: best of both worlds.</p>
<p>However this restricts me to using VS Code's remote development for all my code projects which means that I can't use Android Studio.
Well, I could, but I don't like developping on Windows, I greatly prefer using Nix.</p>
<p>I was really surprised to find that all the docs and ressources about making an Android app were always using Android Studio.
So I decided to come up with a simple guide explaining how to do it without it.</p>
<p>In my case, I will be using Nix and VS Code.</p>
<h2>Setting up the development environment with Nix</h2>
<p>Thanks to Nix, one can create a development environment (shell) from a file.
Check it out: <a href="https://nixos.org/">https://nixos.org/</a></p>
<p>At the root of the project, I create a <code>shell.nix</code> file:</p>
<pre><code class="language-nix">let
  pkgs = import &#x3C;nixpkgs> { config.android_sdk.accept_license = true; };

  mainBuildToolsVersion = "29.0.2";

  android = pkgs.androidenv.composeAndroidPackages {
    toolsVersion = "26.1.1";
    platformToolsVersion = "29.0.6";
    buildToolsVersions = [ mainBuildToolsVersion ];
     = [ "29" ];
  };
in
pkgs.mkShell {
  buildInputs = [
    pkgs.gradle
    pkgs.jdk
    android.androidsdk
  ];

  ANDROID_HOME = "${android.androidsdk}/libexec/android-sdk";
  GRADLE_OPTS = "-Dorg.gradle.project.android.aapt2FromMavenOverride=${android.androidsdk}/libexec/android-sdk/build-tools/${mainBuildToolsVersion}/aapt2";
}
</code></pre>
<p>Although this is not a Nix tutorial (refer to <a href="https://nixos.org/guides/dev-environment.html">this</a> instead), let me explain it step by step.</p>
<p>We define our <code>pkgs</code> variable as usual, but we give it the <code>config.android_sdk.accept_license = true;</code>.
This is required in order to use the Android SDK.</p>
<p>Nixpkgs provides the <code>pkgs.androidenv.composeAndroidPackages</code> function that take a set of properties for your Android SDK environment and returns a set of derivations.
The most important one for us is <code>androidsdk</code>.
You can read more about it on GitHub: <a href="https://github.com/NixOS/nixpkgs/blob/master/doc/languages-frameworks/android.section.md">nixos/nixpkgs # doc/languages-frameworks/android.section.md</a>.</p>
<p>Be very careful about the versions you select for <code>toolsVersion</code>, <code>platformToolsVersion</code>, <code>buildToolsVersions</code> and <code>platformVersions</code>.
They have to work together, or else some weird errors sometime happens because you have not selected versions that are compatible with one each other.</p>
<p>This <code>androidsdk</code> attribute is added to the <code>buildInputs</code> of <code>mkShell</code> so that we have all the Android libs and tools in our environment.</p>
<p>This however does not set the <code>ANDROID_HOME</code> environment variable, which we define by hand in <code>mkShell</code>:</p>
<pre><code class="language-nix">ANDROID_HOME = "${android.androidsdk}/libexec/android-sdk";
</code></pre>
<p>There was also an AAPT 2 bug in my case.
The same as <a href="https://github.com/NixOS/nixpkgs/issues/72220">here</a>.
The solution is to set <code>org.gradle.project.android.aapt2FromMavenOverride</code> in <code>GRADLE_OPTS</code> to use a specific binary, the one in our custom Android SDK:</p>
<pre><code class="language-nix">GRADLE_OPTS = "-Dorg.gradle.project.android.aapt2FromMavenOverride=${android.androidsdk}/libexec/android-sdk/build-tools/${mainBuildToolsVersion}/aapt2";
</code></pre>
<p>After that, we only need to add <code>jdk</code> and <code>gradle</code> to the <code>buildInputs</code>.</p>
<p>Open VS Code, use the <a href="https://marketplace.visualstudio.com/items?itemName=arrterian.nix-env-selector">Nix Environment Extension</a>, select <code>shell.nix</code> and reload.</p>
<p>We are ready to go!</p>
<h2>Creating the project build configuration</h2>
<p>We will use Gradle for our builds.</p>
<p>Let's create our top-level gradle configuration, a root file called <code>build.gradle</code>.</p>
<pre><code class="language-gradle">buildscript {
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.6.4'
    }
}

allprojects {
    repositories {
        google()
        jcenter()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
</code></pre>
<p>This is the basic build configuration you would find by generating your project with Android Studio.
Note that <code>com.android.tools.build:gradle:3.6.4</code> refers to the Gradle plugin for Android development.</p>
<blockquote>
<p>Note: the version specified here will maybe have to be changed in the future. Check <a href="https://developer.android.com/studio/releases/gradle-plugin">the release notes</a>.</p>
</blockquote>
<p>If you want to use a Gradle wrapper, you can do</p>
<pre><code class="language-bash">gradle wrapper
</code></pre>
<p>to generate <code>gradlew</code>.</p>
<blockquote>
<p>Be sure to be inside the nix-shell before using <code>gradle wrapper</code>.</p>
</blockquote>
<p>I would advise to then create a <code>gradle.properties</code> file with the following line:</p>
<pre><code>android.useAndroidX=true
</code></pre>
<p>This will allow you to use AndroidX, with its latest cool features.</p>
<h2>Creating our app</h2>
<p>Let's create a folder <code>app</code>.</p>
<p>We will first create the build configuration of this app.
Let's make a file called <code>build.gradle</code>:</p>
<pre><code class="language-gradle">apply plugin: 'com.android.application'

android {
    compileSdkVersion 29
    buildToolsVersion "29.0.2"
    defaultConfig {
        applicationId "com.example.myapplication"
        versionCode 1
        versionName "1.0"
        minSdkVersion 16
        targetSdkVersion 29
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt')
        }
    }
}

dependencies {
    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'
    implementation 'androidx.appcompat:appcompat:1.2.0'
}
</code></pre>
<p>Let's walk through this file:</p>
<p>We first apply the android plugin thanks to the first line</p>
<pre><code class="language-gradle">apply plugin: 'com.android.application'
</code></pre>
<p>which allows us to use the <code>android</code> directive:</p>
<pre><code class="language-gradle">android {
    compileSdkVersion 29
    buildToolsVersion "29.0.2"
    defaultConfig {
        applicationId "com.example.myapplication"
        versionCode 1
        versionName "1.0"
        minSdkVersion 16
        targetSdkVersion 29
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt')
        }
    }
}
</code></pre>
<blockquote>
<p>Note: specified version here will maybe have to be changed in the future. They should match your SDK versions defined in <code>shell.nix</code>.</p>
</blockquote>
<p>For the sake of demonstration, I have added some Android dependencies:</p>
<pre><code class="language-gradle">dependencies {
    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'
    implementation 'androidx.appcompat:appcompat:1.2.0'
}
</code></pre>
<p>Now, onto writing the code of the actual app!</p>
<p>Create the folder path <code>app/src/main</code></p>
<p>Let's start with the <code>app/src/main/AndroidManifest.xml</code> file.</p>
<pre><code class="language-xml">&#x3C;?xml version="1.0" encoding="utf-8"?>
&#x3C;manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myapplication"
>
    &#x3C;application android:label="Demo App">
        &#x3C;activity android:name="com.example.myapplication.MainActivity">
            &#x3C;intent-filter>
                &#x3C;action android:name="android.intent.action.MAIN" />
                &#x3C;category android:name="android.intent.category.LAUNCHER" />
            &#x3C;/intent-filter>
        &#x3C;/activity>
    &#x3C;/application>
&#x3C;/manifest>
</code></pre>
<p>There is not much to say about it.
It defines an application, "Demo App", with one activity named <code>com.example.myapplication.MainActivity</code>.
This is a very simple empty app!</p>
<p>Now, we need some Java code.</p>
<p>Create in <code>app/src/main/java</code> the path corresponding to the package path, here <code>app/src/main/com/example/myapplication</code>.
In that folder, create <code>MainActivity.java</code>:</p>
<pre><code class="language-java">package com.example.myapplication;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
}
</code></pre>
<p>The package path matches the folder path after <code>app/src/main/java</code>.
The class name matches our Android manifest and extends <code>android.app.Activity</code>.
The method inside it doesn't do much, it just uses the super constructor to create the activity.</p>
<h2>Building our app</h2>
<p>Open a terminal, go to the root folder of the project and get to a nix shell:</p>
<pre><code class="language-bash">nix-shell
</code></pre>
<p>Then build it using Gradle</p>
<pre><code class="language-bash">gradle build
</code></pre>
<p>if you use the gradle wrapper</p>
<pre><code class="language-bash">./gradlew build
</code></pre>
<p>It should build without errors.</p>
<blockquote>
<p>If you get any errors, please <a href="https://github.com/GuillaumeDesforges/nix-android-template/issues/new">create an issue</a>.</p>
</blockquote>
<h2>Launching / debugging</h2>
<p>Now's the interesting part.
I want to debug my app using the VS Code <a href="https://marketplace.visualstudio.com/items?itemName=adelphes.android-dev-ext">Android debug extension</a> that runs on my development server with Nix, but I want to run an emulator on my desktop computer (on Windows).</p>
<p>It's simple enough to do: start your Android emulator.
I use Android Studio's AVD Manager, accessible from the Android Studio start window, <code>Configure</code> -> <code>AVD Manager</code>.
After starting an emulator, you can close the AVD Manager window.</p>
<p>I now use SSH port forwarding to forward the emulator.
From my desktop (running the emulator) I launch:</p>
<pre><code class="language-bash">ssh -vNR 5554:localhost:5554 -R 5555:localhost:5555 devserver
</code></pre>
<p>where <code>devserver</code> is an SSH configuration to connect to my Linux machine.</p>
<p>You can check if the device is available, but running in the nix shell:</p>
<pre><code class="language-bash">adb devices
</code></pre>
<p>which should display something like</p>
<pre><code>List of devices attached
emulator-5554 device
</code></pre>
<p>You need an Android launch config in VS Code, see my <code>.vscode/launch.json</code>:</p>
<pre><code class="language-json">{
    "version": "0.2.0",
    "configurations": [
        {
            "type": "android",
            "request": "launch",
            "name": "Android launch",
            "appSrcRoot": "${workspaceRoot}/app/src/main",
            "apkFile": "${workspaceRoot}/app/build/outputs/apk/debug/app-debug.apk",
            "adbPort": 5037,
            "targetDevice": "${command:PickAndroidDevice}"
        }
    ]
}
</code></pre>
<p>Then start this <code>Android launch</code> configuration.</p>
<p><img src="/imgs/android-dev-nix/itworks.png" alt="It works (screenshot)"></p>
<h2>Conclusion</h2>
<p>You can find the source code of the project here: <a href="https://github.com/GuillaumeDesforges/nix-android-template">https://github.com/GuillaumeDesforges/nix-android-template</a></p>
<p>If you have difficulties, you can post a new <a href="https://github.com/GuillaumeDesforges/nix-android-template/issues/new">issue</a>.</p>
<p>In order to use React Native, I am going to follow the <a href="https://reactnative.dev/docs/integration-with-existing-apps">steps described here</a>.
I might write about it in another blogpost if it's more complex than what's written on the official website.</p>
<p>I really love Nix because it simplifies my development experience.
While I may struggle sometimes trying to get my very first environment for a project in an ecosystem I don't know yet, once it is done it is done <em>forever</em>.</p>
<p>Debugging all the build errors I had was no fun, so I hope this blog post will be useful for others.</p>
<p>Cheers!</p></div></div></div></main><footer style="text-align:center;padding:1em;color:#AAA">Guillaume Desforges Â© <!-- -->2020</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/android-dev-nix";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-ca8adf9770cfeec4c092.js"],"app":["/app-ad67cb265854e65ca917.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0db82d6eeee6490b835e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-037087f6bdef211ec824.js"],"component---src-templates-article-template-js":["/component---src-templates-article-template-js-0ed56a67829c8ab1881c.js"]};/*]]>*/</script><script src="/polyfill-ca8adf9770cfeec4c092.js" nomodule=""></script><script src="/component---src-templates-article-template-js-0ed56a67829c8ab1881c.js" async=""></script><script src="/commons-c8faa090aa439f9fb613.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-ad67cb265854e65ca917.js" async=""></script><script src="/framework-44697bb84c432a102996.js" async=""></script><script src="/webpack-runtime-4af22aa3d881e1b9345f.js" async=""></script></body></html>